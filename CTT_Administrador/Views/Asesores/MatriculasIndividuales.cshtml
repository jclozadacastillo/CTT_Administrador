@{
    ViewData["Title"] = "Matriculas Individuales";
    Layout = "~/Views/Shared/_LayoutAsesor.cshtml";
}
<div class="container-fluid" id="content">
    <div class="row">
        <div class="col-auto me-0 pe-0 form-title">
            <h4>Matriculas Individuales</h4>
        </div>
    </div>
    <hr>
    <form class="row" id="frmFiltros">
        <div class="col-sm-4">
            <label class="fs-sm">Periodo</label>
            <select class="form-select form-select-sm" id="idPeriodo" name="idPeriodo" onchange="listar()"></select>
        </div>
        <div class="col-sm-4">
            <label class="fs-sm">Tipo</label>
            <select class="form-select form-select-sm" id="idTipoCurso" name="idTipoCurso" onchange="listar()"></select>
        </div>
        <div class="col-sm-4" id="containerBtn">
        </div>
    </form>

    <div class="table-responsive p-1 mt-4">
        <table class="table table-sm w-100 table-custom-asesores" id="tableDatos"></table>
    </div>
</div>

<div class="modal fade" id="modalDatos" tabindex="-1" aria-labelledby="modalDatosLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header py-2">
                <h1 class="modal-title text-white" id="modalDatosLabel">Modal title</h1>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body bg-light px-2">
                <form class="row mx-0 px-3" id="frmDatos">
                    <div class="row mx-0 px-1 alert alert-light">
                        <div class="col-8">
                            <label class="fs-6 fw-bold">Estudiante</label>
                            <select class="form-select form-select-sm col-sm-6" id="idEstudiante" name="idEstudiante" onchange="handleCursos()"></select>
                            <div class="invalid-feedback">
                            </div>
                        </div>
                        <div class="col-4 pt-4">
                            <a class="btn btn-success btn-sm" href="~/Asesores/Estudiantes" target="_blank">Registrar Estudiante</a>
                        </div>
                    </div>

                    <div class="col-sm-12 alert alert-light" id="gruposcursos" hidden>
                        <label class="fs-6 fw-bold" id="labelGrupoCurso"></label>
                        <select class="form-select form-select-sm" id="idGrupoCurso" name="idGrupoCurso" onchange="cargarModulos()"></select>
                        <div class="invalid-feedback">
                            * Campo requerido
                        </div>
                    </div>
                    <div class="col-sm-12 alert alert-light" id="modulos" hidden>
                        <label class="fs-6">Seleccione los <strong class="fs-lg">módulos</strong> de <strong class="fs-lg text-uppercase" id="grupoCursoLabel"></strong> en los que se va a realizar la matricula.</label>
                        <div class="row">
                            <div class="col-sm-12" id="idCurso">
                            </div>
                        </div>
                        <div class="col-sm-3">
                            <label class="fs-6 fw-bold">Paralelo</label>
                            <select class="form-select form-select-sm" id="paralelo" name="paralelo">
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-12 col-md-12 alert alert-light" id="pagos" hidden>
                        <h6 class="fw-bold" style="font-size:18px">Pago Inicial</h6>
                        <label class="fs-6"><b>VALOR TOTAL A CANCELAR: </b><span style="font-size:22px" class="text-success" id="costo">0.0</span></label>
                        <div class="row">
                            <div class="col-sm-9">
                                <label class="fs-sm">Forma de pago</label>
                                <select class="form-select" id="idFormaPago" name="idFormaPago" onchange="handleBancos()">
                                    <option value="">Seleccione</option>
                                </select>
                            </div>
                            <div class="col-sm-9" hidden>
                                <label class="fs-sm">Banco</label>
                                <select class="form-select" id="idCuenta" name="idCuenta">
                                    <option value="">Seleccione</option>
                                </select>
                            </div>
                            <div class="row" id="datosTarjeta" hidden>
                                <div class="col-sm-4">
                                    <label class="fs-sm">Marca de tarjeta</label>
                                    <select class="form-select" id="tajetaMarca" name="tajetaMarca">
                                        <option value="">Seleccione</option>
                                        <option value="Visa">Visa</option>
                                        <option value="MasterCard">MasterCard</option>
                                        <option value="American Express">American Express</option>
                                        <option value="Discover">Discover</option>
                                        <option value="Diners Club">Diners Club</option>
                                    </select>
                                </div>
                                <div class="col-sm-6">
                                    <label class="fs-sm">Número de autorización</label>
                                    <input class="form-control text-end" id="tajetaAutorizacion" name="tajetaAutorizacion" maxlength="50" title="Ingrese el número de transacción o autorización enviado por la entidad bancaria" placeholder="Ingrese el número de transacción o autorización enviado por la entidad bancaria" />
                                    <div class="invalid-feedback">
                                        * Campo requerido
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-9">
                                <label class="fs-sm">Comprobante</label><span class="fs-xs ms-3 text-uppercase text-danger fw-bold">imagen o pdf de máximo 3mb</span>
                                <input type="file" no-uppercase accept="application/pdf,image/png, image/jpg, image/jpeg" class="form-control form-control-sm" id="archivoComprobante" name="archivoComprobante" />
                                <div class="invalid-feedback">
                                    * Campo requerido
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <label class="fs-sm">Fecha Pago</label>
                                <input type="date" class="form-control form-control-sm" id="fechaPago" name="fechaPago" />
                                <div class="invalid-feedback">
                                    * Campo requerido
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <label class="fs-sm">Número de <span id="labelComprobante">comprobante</span></label>
                                <input class="form-control form-control-sm text-end" id="numeroComprobante" name="numeroComprobante" maxlength="50" />
                                <div class="invalid-feedback">
                                    * Campo requerido
                                </div>
                            </div>
                            <div class="col-sm-3">
                                <label class="fs-sm">Valor de pago</label>
                                <input class="form-control form-control-sm text-end readonly" data-validate="decimal" id="valor" name="valor" maxlength="10" />
                                <div class="invalid-feedback">
                                    * Campo requerido
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 alert alert-light" id="facturacion" hidden>
                        <label class="fs-6 fw-bold">Datos de <strong class="fs-lg">facturación</strong></label>
                        <div class="row">
                            <div class="col-sm-4">
                                <label class="fs-sm">Tipo de documento</label>
                                <select class="form-select form-select-sm" id="idTipoDocumento" name="idTipoDocumento" onchange="handleTipoDocumento()">
                                </select>
                            </div>
                            <div class="col-sm-4">
                                <label class="fs-sm">Documento de identidad</label>
                                <input class="form-control form-control-sm text-end" data-validate="cedula" id="documento" name="documento" maxlength="13" />
                                <div class="invalid-feedback">
                                    * Campo requerido
                                </div>
                            </div>
                            <div class="col-sm-10">
                                <label class="fs-sm">Razón Social</label>
                                <input class="form-control form-control-sm" id="nombre" name="nombre" maxlength="100" />
                                <div class="invalid-feedback">
                                    * Campo requerido
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <label class="fs-sm">Celular/Teléfono</label>
                                <input class="form-control form-control-sm" data-validate="numeros" id="telefono" name="telefono" maxlength="10" />
                                <div class="invalid-feedback">
                                    * Campo requerido
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <label class="fs-sm">Email</label>
                                <input class="form-control form-control-sm" data-validate="email" id="email" name="email" maxlength="100" />
                                <div class="invalid-feedback">
                                    * Campo requerido
                                </div>
                            </div>

                            <div class="col-sm-10">
                                <label class="fs-sm">Dirección</label>
                                <textarea class="form-control form-control-sm" id="direccion" name="direccion" maxlength="100"></textarea>
                                <div class="invalid-feedback">
                                    * Campo requerido
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer py-2">
                <button type="button" class="btn btn-secondary btn-sm" data-cerrar
                        data-bs-dismiss="modal">
                    Cerrar
                </button>
                <button type="button" class="btn btn-primary btn-sm" data-guardar
                        onclick="generarMatricula()">
                    Generar Matrícula
                </button>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="modalDetalle" tabindex="-1" aria-labelledby="modalDetalleLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header py-2">
                <h1 class="modal-title text-white" id="modalDetalleLabel">Modal title</h1>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="row px-4 alert alert-light my-0 mx-2">
                       <div class="col-sm-12 text-end">
                        <label class="fs-6 fw-bold">DEUDA PENDIENTE: <strong id="deudaDetalleMatricula">0.0</strong></label>
                       </div>
                       <div class="col-sm-12 fs-sm">
                           <label id="estudianteDetalleMatricula"></label>
                       </div>
                    <div class="col-sm-12 fs-sm">
                        <label class="fw-bold" id="tipoCursoDetalleMatricula"></label>
                    </div>
                    <div class="col-sm-12 fs-sm">
                        <label id="cursoDetalleMatricula"></label>
                    </div>
                    <div class="col-sm-12" id="detalleMatriculaModulos">

                    </div>
                    <div class="col-sm-12 fs-sm">
                        <label class="fw-bold">DETALLE DE PAGOS</label>
                    </div>
                    <div class="col-sm-12">
                        <div class="table-responsive">
                            <table class="fs-sm table table-striped w-100">
                                <thead class="bg-primary text-white">
                                    <tr>
                                        <th></th>
                                        <th>FECHA</th>
                                        <th>CUENTA</th>
                                        <th>#DOCUMENTO</th>
                                        <th>TIPO</th>
                                        <th>VALOR</th>
                                    </tr>
                                </thead>
                                <tbody id="detallePagosMatricula">

                                </tbody>
                               </table>
                        </div>

                    </div>
                </div>
            </div>
            <div class="modal-footer py-2">
                <button type="button" class="btn btn-secondary btn-sm" data-cerrar
                        data-bs-dismiss="modal">
                    Cerrar
                </button>
            </div>
        </div>
    </div>
</div>
<script defer src="~/js/asesores/siteMatriculasIndividuales.js?v=@DateTime.Now.Ticks"></script>